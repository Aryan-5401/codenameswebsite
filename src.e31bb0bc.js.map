{"version":3,"sources":["index.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["encodedUser","localStorage","getItem","parsedUser","JSON","parse","player_id","name","entropy","Uint32Array","window","crypto","getRandomValues","playerID","join","guestNumber","Math","floor","random","toString","toUpperCase","form","document","getElementById","addEventListener","logSubmit","startElmApp","e","preventDefault","age","value","gender","country","stringify","setItem","app","Elm","Main","init","node","flags","ports","storeCache","subscribe","u","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","length","module"],"mappings":"ACAA,ACAA,IDAI6C,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;;ADCA,ACCA,AFFA,SCCSZ,ACCAa,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDChB,MCCM,GDDX,ACCce,EDDE,ECCE,CAACE,SAAL,EAAd;ADAEjB,ADFJ,ICEIA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADc,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,AFFJ,IEEIA,IAAI,CAACI,MAAL;ADCF,ACAC,AFFH,GEAE,MDEOnB,SAAP;AACD,ADFD;AEEEgB,AFDF,EECEA,EFDE7D,KECK,CAACiE,IAAR,CFDa,EECEL,CFDC3D,GECG,CAACgE,IAAL,CAAUC,GFDG,CAAChE,CECd,CAAgB,GAAhB,EAAqB,AFDpB,CECD,AFDsB,IECI,EFDzB,CECD,AFDjB,GECiDiE,IAAI,CAACC,GAAL,EAA/C;ADEF,ACDER,AFAF,EEAEA,EFAEzD,EEAE,CAACkE,EDCEtB,KDDK,GEAZ,AFAe/C,CEACsE,GDClB,GAAwB,IDDI,EEA1B,CAA6BT,AFAAzD,IAAI,CAACC,EEAlC,EAAsCuD,CFAT,CAAW5D,EEAE,CAACuE,QFAd,CAAH,EEA1B,CFAuD,IAAzD;ACEE,ACDD;ADEC,ADDF,IAAIpE,ECCE,QDDQ,IAAI,IAAd,IAAsB,CAACA,UAAU,CAACG,SAAlC,IAA+C,CAACH,UAAU,CAACI,IAA/D,EAAqE;ACEjE,ACDJ,AFAI,IEAAiE,MDCM,IAAIxB,ACDA,GAAG,EDCP,EAAN,ACDJ;ADEG,ADAC,GCFF,CAEE,EDAIxC,KCAGyC,EDAI,CCAX,EAAY,ADAE,IAAIxC,WAAJ,CAAgB,CAAhB,CAAd,CAHiE,CAG/B;ACClC,ACFJ,QDEQyC,CCFCuB,MDEM,GAAG,ACFlB,CDEmB,ECFE,GDEGxB,GAAG,CAACE,KAAV,EAAiBC,KAAjB,CAAuB,+DAAvB,CAAd;ACDF,AFCE1C,EAAAA,IEDE8D,EFCI,CAAC7D,MAAP,CEDF,AFCgBC,EEDA,aFCd,CAA8BJ,OAA9B;ACCA,ACDA,AFCA,MAAIK,ECAAqC,MDAQ,CCAZ,EAAa,ADAE1C,OAAO,CAACM,IAAR,CAAa,GAAb,CAAf;ACCE,ACDH,AFEC,MAAIC,OCDKsC,IDCM,GAAGrC,GCDC,CAACkC,ADCE,CAACjC,KAAL,CCDS,ADCED,CCDD,CAAD,CAAR,CAAjB,ADC+B,CAACE,MAAL,KAAgB,IAA3B,CAAlB;ACAC,ADEDf,EAAAA,UAAU,GAAG;ACDd,ACDDqE,AFGIlE,EEHJkE,EFGIlE,QEHM,CFGG,EEHAoE,AFGE7D,QADA,EEFQ,CAAC,YAAY;AAClC,AFGEN,IAAAA,IEHEoE,AFGE,EAAE,GEHC,GAAGrD,KFGMP,GEHE,CAAC6D,OFGQ,CAACzD,QEHlB,AFGM,CEHoB,AFGC,EAArB,EAAyBC,WAAzB,SEHN,CAAZ;ADEF,ADDe,GAAb,MCCK,GAAP;AACD,ACFG,AFKA,MAAMC,GELD,CFKK,GELDwD,AFKIvD,CELH,GAAG,CAAb,EAAgBuD,CAAC,AFKI,CAACtD,EELFoD,KAAK,CAACG,MAA1B,AFKa,CAAwB,CELHD,CAAC,EAAnC,EAAuC,AFK1B,CAAb;AEJE,AFKFxD,EAAAA,IAAI,CAACG,GELCiC,MAAM,CAACJ,MFKb,CAAsB,GELhB,CAAkBsB,IFKxB,CEL6B,CAACE,AFKEpD,CELH,CAAL,CAASwC,IAA3B,EFKN,IEL2CR,MAAM,CAACV,YAAP,EAAzC,EAAgE;ADGtE,ACFQY,AFMP,CAjBD,MAiBOjC,CENCiC,CDECN,SCFS,AFMA,CCJlB,ACFmBsB,CDECrB,GAApB,CCFwB,CDEC,ACFAuB,CAAD,CAAN,CAAV;ADGN,ACFK,SDEE,CAAC,KAAKvB,GAAN,EAAWC,OAAX,CAAmB,sEAAnB,EAA2F,IAA3F,IAAmG,GAA1G;AACD,ACFI,AFML,SAAS9B,SAAT,CAAmBE,CAAnB,EAAsB;AACpBA,EAAAA,CAAC,CAACC,cAAF;ACHF4B,ACFIgB,AFOF,IEPEA,EFOE3C,CCLC,CAACkB,CDKC,GAAGzB,EEPE,GAAG,GDEjB,ADKoB,CEPhB,AFOiBC,ECLEuB,YDKX,CAAwB,KCLpC,MDKY,EAAqChB,KAA/C;ACJF0B,ACFG,AFOD,GEhBuB,EASpB,CFOCzB,CCLC,ACXkB,CDWjBsB,ACXN,IFgBU,GAAG/B,GCLf,GAAqB+B,EDKE,CAAC9B,OCLxB,ODKe,CAAwB,cAAxB,EAAwCO,KAArD;AEND,AFOC,MAAIE,OAAO,GAAGV,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCO,KAAvD;AACA3B,EAAAA,UAAU,CAAC,KAAD,CAAV,GAAoB0B,GAApB;AENFkD,AFOE5E,EAAAA,IEPI,CAACqD,KFOK,CAAC,CEPb,GAAiBiB,IFOL,CAAV,GAAuB1C,CEPzB,KFOE;AACA5B,EAAAA,UAAU,CAAC,SAAD,CAAV,GAAwB6B,OAAxB;AACAhC,EAAAA,WAAW,GAAGI,IAAI,CAAC6B,SAAL,CAAe9B,UAAf,CAAd;AACAF,EAAAA,YAAY,CAACiC,OAAb,CAAqB,MAArB,EAA6BlC,WAA7B;AAEA0B,EAAAA,WAAW;AACZ;;AAED,SAASA,WAAT,GAAuB;AACrB,MAAIS,GAAG,GAAGC,UAAIC,IAAJ,CAASC,IAAT,CAAc;AACtBC,IAAAA,IAAI,EAAEjB,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CADgB;AAEtBiB,IAAAA,KAAK,EAAExC;AAFe,GAAd,CAAV;;AAIAmC,EAAAA,GAAG,CAACM,KAAJ,CAAUC,UAAV,CAAqBC,SAArB,CAA+B,UAASC,CAAT,EAAY;AACzC3C,IAAAA,YAAY,CAACiC,OAAb,CAAqB,MAArB,EAA6B9B,IAAI,CAAC6B,SAAL,CAAeW,CAAf,CAA7B;AACD,GAFD;AAGD","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["import './main.css';\nimport { Elm } from './Main.elm';\n\n// Metadata about the user is persisted in local storage.\n// If there is no user in local storage, we generate one\n// with a random player ID and random guest name.\nvar encodedUser = localStorage.getItem('user');\n\nvar parsedUser = encodedUser ? JSON.parse(encodedUser) : null;\n\nif (parsedUser == null || !parsedUser.player_id || !parsedUser.name) {\n    // generate a new user with a random identifier and save it.\n\n    var entropy = new Uint32Array(4); // 128 bits\n    window.crypto.getRandomValues(entropy);\n    var playerID = entropy.join(\"-\");\n\n    var guestNumber = Math.floor(Math.random() * 4095);\n\n    parsedUser = {\n      player_id: playerID,\n      name: 'Guest '+ guestNumber.toString(16).toUpperCase(),\n    };\n\n    const form = document.getElementById('form');\n    form.addEventListener('submit', logSubmit);\n\n} else startElmApp();\n\nfunction logSubmit(e) {\n  e.preventDefault();\n\n  var age = document.getElementById(\"age-field\").value\n  var gender = document.getElementById(\"gender-field\").value\n  var country = document.getElementById(\"country-field\").value\n  parsedUser[\"age\"] = age;\n  parsedUser[\"gender\"] = gender;\n  parsedUser[\"country\"] = country;\n  encodedUser = JSON.stringify(parsedUser)\n  localStorage.setItem('user', encodedUser);\n\n  startElmApp();\n}\n\nfunction startElmApp() { \n  var app = Elm.Main.init({\n    node: document.getElementById('root'),\n    flags: encodedUser,\n  });\n  app.ports.storeCache.subscribe(function(u) {\n    localStorage.setItem('user', JSON.stringify(u));\n  });\n}\n\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}